<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.0.0 for Windows">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>利用説明書</title>
<style type="text/css">
<!--
body{
  font-size : 80%;
}
A{
  text-decoration : none;
}
H2{
  letter-spacing : 1px;
  color : #ff6600;
  text-align : center;
}
#main_div{
  text-align : left;
  width : 400px;
  height : 100%;
  line-height : 1.4;
}
TABLE{
  width : 100%;
  border-style : solid solid solid solid;
  border-top-color : silver;
  border-right-color : silver;
  border-bottom-color : silver;
  border-left-color : silver;
}
H4{
  border-left-width : 3px;
  border-left-style : solid;
  border-left-color : #ff6600;
  padding-left : 5px;
  color : #ff6600;
  border-bottom-width : 1px;
  border-bottom-style : dotted;
  border-bottom-color : #ff6600;
}
#quote{
  padding-left : 5px;
  margin-top : 5px;
  margin-left : 10px;
  margin-right : 10px;
  margin-bottom : 5px;
  border-left-width : 1px;
  border-left-style : solid;
  border-left-color : #ffbe7d;
}
TD{
  border-width : 1px 1px 1px 1px;
  border-style : solid solid solid solid;
  border-color : silver silver silver silver;
}
TH{
  border-width : 1px 1px 1px 1px;
  border-style : solid solid solid solid;
  border-color : silver silver silver silver;
}
IMG{
  padding-left : 10px;
  padding-right : 10px;
}
.code{
  background: #FFFFFF;
  border: 1px inset #000080;
  padding: 0px 6px 6px 6px;
  width: 380px;
  height: 100%;
  margin: 0.5em;
  overflow: auto;
}
.news{
  font-size : 0.8em;
  letter-spacing : 1px;
}
-->
</style>
</head>
<body>
<div align="center">
<div id="main_div">
<h2>Bulletin</h2>
<h4>このモジュールについて</h4>
<img src="module_icon.png" width="92" height="52" border="0" align="left">ニュースモジュールのひとつです。newsの古いコードを刷新することが開発のきっかけとなりました。最終的に過去の有用なハックなどを盛り込み、Duplicatable機能も付け加えました。
<h4>機能説明</h4>
<ul>
  <li>ニュース投稿・編集・削除
  <li>アーカイブ
  <li>RSS配信
  <li>モジュールの複製( Dupulication V3 )
  <li>newsの記事の取り込み
  <li>関連記事機能 <font color="#ff0033">new!!</font>
  <li>同じカテゴリの最新記事一覧機能<font color="#ff0033"> new!!</font>
</ul>
<h4>newsからの変更点</h4>
<ul>
  <li>各ファイルでassignされているテーマ変数から出来るだけHTMLタグを取り除いた。
  <li>各ファイルにおいてディレクトリ名を変更できるように改変した。
  <li>各ファイルでinclude から require に関数を交代した。
  <li>$HTTP_*_VALUE を $_* に置き換えた。
  <li>テンプレートを各PHPファイルの変更にあわせて改変した。
  <li>テンプレートに&lt;{strip}&gt;タグを加えた。
  <li>print.phpをテンプレート出力に対応した。
  <li>各ファイルにおいて，相対パスを絶対パスに変更した。
  <li>print.phpにおける潜在的なtypoを訂正した。
  <li>「のこり***バイト」をマルチバイト環境に対応し，かつ「のこり**文字」に変更。
  <li>「分」の選択肢が 0~60 だったので 0~59 に修正。
  <li>記事投稿の日時選択フォーマット「月：mm 日：dd 年：YYYY 時：HH 分：ii」を，日本語式に「YYYY年mm月dd日HH時ii分」に変更した。
  <li>アーカイブの表示方法を，スペースを有効活用するように変更した。
  <li>archive.phpのSQL記述をclassへ移動した。
  <li>ニュース投稿権限をグループごとに与えられる機能を追加した。（XOOPS2.0.4以降）
  <li>ニュース投稿自動承認をグループごとで決められる機能を追加した。（XOOPS2.0.4以降）
  <li>ユーザーのタイムゾーンが反映されない部分を修正した。
  <li>DB項目の’story_type’を’type’に変更した。
  <li>submit.phpにおける，本文フォームのサイズを一般設定で変更できる機能を追加した。
  <li>コメントに記事の存在確認処理を追加。
  <li>検索結果の日時を投稿日時から掲載日時に変更した。
  <li>記事から画像がはみ出してしまうバグを修正。
  <li>記事の題名をサイトのタイトルに。
  <li>article.phpにおける$storypageの妥当性を確認する処理を追加。
  <li>言語の名付け規則に従ってlanguageファイルを訂正した。（_NW_*→_MD_*）
  <li>本名もassignした。
  <li>HTMLが有効なら改行を無効にした。
  <li>クラスから出来る限りHTMLを追放した。→テンプレートへ。
  <li>Ryujiさんのブロックを取り入れた。
  <li>カレンダーブロックを追加。
  <li>GIJOEさんのmyblockadminを取り入れた。
  <li>投稿数加算処理を改善。
  <li>コメントブロックを追加した。
  <li>期限切れの記事が見られるバグ（仕様？）を修正。
  <li>記事の編集・管理の使い勝手を改善する。
  <li>メールの文字化けは&quot;Tell A Friend&quot;に対応。
  <li>ルートコントローラで配信していたRSSをモジュールの一部にした。→グループ設定が反映されるようになる。
  <li>複製可能にした。
</ul>
ほかにも理解不能な仕様を改善したり、ずっと放置されていたっぽいバグFixをしたりといろいろ変わった点があります。
<h4>ToDo</h4>
<ul>
  <li>TinyDをまねて静的URLを生成するとか。
  <li>トラックバック機能を追加してみるとか。
  <li>ファイルアップ機能を追加したほうがいいか。
  <li>携帯電話端末対応は必須か。
</ul>
<h4>複製方法</h4>
Bulletinの複製機能はいわゆるDuplicatable V3です。<br>
<h4>newsのデータベースとの差違</h4>
`storyid` int(8) unsigned NOT NULL auto_increment,<br>
→変更無し<br>
`uid` int(5) unsigned NOT NULL default '0',<br>
→変更無し<br>
`title` varchar(255) NOT NULL default '',<br>
→変更無し<br>
`created` int(10) unsigned NOT NULL default '0',<br>
→変更無し<br>
`published` int(10) unsigned NOT NULL default '0',<br>
→変更無し<br>
`expired` int(10) unsigned NOT NULL default '0',<br>
→変更無し<br>
`hostname` varchar(20) NOT NULL default '',<br>
→変更無し<br>
`html` tinyint(1) NOT NULL default '0',<br>
→nohtmlだと否定が基本で認知的に非効率的なので、肯定に変更<br>
`smiley` tinyint(1) NOT NULL default '0',<br>
→nosmileyだと否定が基本で認知的に非効率的なので、肯定に変更<br>
`br` tinyint(1) NOT NULL default '0',<br>
→以前から必要だと言われていたので追加<br>
`xcode` tinyint(1) NOT NULL default '0',<br>
→なかったので追加<br>
`hometext` text NOT NULL,<br>
→変更無し<br>
`bodytext` text NOT NULL,<br>
→変更無し<br>
`counter` int(8) unsigned NOT NULL default '0',<br>
→変更無し<br>
`topicid` smallint(4) unsigned NOT NULL default '1',<br>
→変更無し<br>
`ihome` tinyint(1) NOT NULL default '0',<br>
→0と1を逆転<br>
`notifypub` tinyint(1) NOT NULL default '0',<br>
→削除<br>
`type` tinyint(1) NOT NULL default '0',<br>
→”story_type”だったもの。もはや必要のないもの。Bulletinでは承認/未承認の区別に利用<br>
`topicimg` tinyint(1) NOT NULL default '0',<br>
→”topicdisplay”,”topicalign”をひとまとめにして、数値で表すように変更。<br>
`comments` smallint(5) unsigned NOT NULL default '0',<br>
→変更無し<br>
<h4>インストール方法</h4>
<font color="#ff6600"><b>最初の１個をインストールする方法</b></font><br>
<br>
(1) アーカイブを展開して、html/modules/bulletin を moduels の下にコピー<br>
<br>
(2) ディレクトリ名は好きにつけてください。(例 mycompany)<br>
<br>
(3) DocumentRootの外に専用のディレクトリを作ります (例 /home/yourhome/xoops_trust_path)<br>
<br>
(4) そのディレクトリのフルパスをmainfile.phpに記述します。場所はXOOPS_URL定義行の直後が良いでしょう。
<div class="code">define('XOOPS_TRUST_PATH','/home/yourhome/xoops_trust_path');</div>
（このステップ(3)と(4)は、最速キャッシュハックと同じです）<br>
<br>
(5) XOOPS_TRUST_PATHの下にmodulesディレクトリを作ります (例 /home/yourhome/xoops_trust_path/modules)<br>
<br>
(6) アーカイブのxoops_trust_path/modules/bulletinをXOOPS_TRUST_PATH/modules/にコピーします
(例 /home/yourhome/xoops_trust_path/modules/bulletin)<br>
<br>
(7) XOOPSモジュールとしてインストールしてください。<br>
<br>
<b><font color="#ff6600">もう一個モジュールをインストールする方法</font></b><br>
<br>
(1) アーカイブの html/modules/bulletin を moduels の下にコピー<br>
<br>
(2) ディレクトリ名を好きにつけてください (例 mypolicy)<br>
<br>
(5) XOOPSモジュールとしてインストールしてください。<br>
<br>
<b><font color="#ff6600">モジュールをバージョンアップする方法</font></b><br>
<br>
(1) アーカイブのxoops_trust_path/modules/bulletinをXOOPS_TRUST_PATH/modules/に上書きコピーします
(例 /home/yourhome/xoops_trust_path/modules/bulletin)<br>
<br>
(2) 必要に応じて、モジュールアップデートをかけます。<br>
<br>
たったこれだけですべてのモジュールがアップデートされたことになります。<br>
<br>
<font size="-2" color="#666666">GIJOEさん、すみません。テキスト勝手に借りました…。</font>
<h4>アンインストール方法</h4>
通常のモジュール同様にモジュール管理よりアンインストールを実行してください。
<h4>更新履歴</h4>
<table cellpadding="0" cellspacing="0" class="news" border="0">
  <col span="3">
  <tbody>
    <tr>
      <th align="center">Ver</th>
      <th align="center">Date</th>
      <th align="center">Category</th>
      <th align="center">Note</th>
    </tr>
    <tr>
      <td align="center">2.04</td>
      <td align="center">2006-08-19</td>
      <td align="center">バグ</td>
      <td>未完成のテンプレートのためインストールが失敗するバグを修正。(thx kazu, plusangel)</td>
    </tr>
    <tr>
      <td align="center">2.03</td>
      <td align="center">2006-07-20</td>
      <td align="center">バグ</td>
      <td>モジュールのアイコンの色がおかしくなるバグを修正。(thx GIJOE)</td>
    </tr>
    <tr>
      <td align="center">2.03</td>
      <td align="center">2006-07-20</td>
      <td align="center">変更</td>
      <td>gticketをgticket2に変更。</td>
    </tr>
    <tr>
      <td align="center">2.03</td>
      <td align="center">2006-07-20</td>
      <td align="center">変更</td>
      <td>oninstall.php, update.php, onuninstall.phpのCube対応(thx GIJOE)</td>
    </tr>
    <tr>
      <td align="center">2.03</td>
      <td align="center">2006-07-20</td>
      <td align="center">変更</td>
      <td>RSSの&lt;description&gt;の文字数制限を削除。(thx GIJOE)</td>
    </tr>
    <tr>
      <td align="center">2.03</td>
      <td align="center">2006-07-20</td>
      <td align="center">バグ</td>
      <td>main/search.php、class/bulletingp.phpのショートタグを修正(thx GIJOE)</td>
    </tr>
    <tr>
      <td align="center">2.03</td>
      <td align="center">2006-07-20</td>
      <td align="center">バグ</td>
      <td>URLにスラッシュが抜けている部分を修正(thx fujisawa)</td>
    </tr>
    <tr>
      <td align="center">2.03</td>
      <td align="center">2006-07-20</td>
      <td align="center">バグ</td>
      <td>カテゴリのパンくず表示がでたらめになるバグを修正(thx jidaikobo)</td>
    </tr>
    <tr>
      <td align="center">2.03</td>
      <td align="center">2006-07-20</td>
      <td align="center">バグ</td>
      <td>カテゴリブロックでnewsの名残を修正(thx jidaikobo)</td>
    </tr>
    <tr>
      <td align="center">2.02</td>
      <td align="center">2006-07-09</td>
      <td align="center">バグ</td>
      <td>assingというtypoをassignに訂正(thx jidaikobo)</td>
    </tr>
    <tr>
      <td align="center">2.02</td>
      <td align="center">2006-07-09</td>
      <td align="center">変更</td>
      <td>一般設定の日時フォーマットをブロックにも適用できるように変更(thx jidaikobo)</td>
    </tr>
    <tr>
      <td align="center">2.02</td>
      <td align="center">2006-07-07</td>
      <td align="center">言語</td>
      <td>Frenchを更新。(thx gigamaster)</td>
    </tr>
    <tr>
      <td align="center">2.01</td>
      <td align="center">2006-07-03</td>
      <td align="center">バグ</td>
      <td>Bulletin1からアップデートすると、ブロックのテンプレートが無効になるバグを修正。(thx plusangel)</td>
    </tr>
    <tr>
      <td align="center">2.01</td>
      <td align="center">2006-07-03</td>
      <td align="center">バグ</td>
      <td>main/search.phpで日本語の言語ファイルを無条件に読み込んでしまうバグ。(thx FutureSpy)</td>
    </tr>
    <tr>
      <td align="center">2.01</td>
      <td align="center">2006-07-03</td>
      <td align="center">追加</td>
      <td>新規コメント投稿時のイベント通知機能。</td>
    </tr>
    <tr>
      <td align="center">2.01</td>
      <td align="center">2006-07-03</td>
      <td align="center">言語</td>
      <td>Englishを更新 (thx FutureSpy)</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-25</td>
      <td align="center">変更</td>
      <td>掲載の承認/非承認をチェックボックスでスイッチできるようにした。</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-25</td>
      <td align="center">追加</td>
      <td>オプションに「ブロックに表示する」を追加。</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-23</td>
      <td align="center">変更</td>
      <td>文字カウント関数をより正確なものへ変更。</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-23</td>
      <td align="center">変更</td>
      <td>item.htmlの&lt;br clear=&quot;all&quot; /&gt;を&lt;div style=&quot;clear:
      both;&quot;&gt;&lt;/div&gt;に変更</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-07</td>
      <td align="center">追加</td>
      <td>パンくずリストを追加。</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-07</td>
      <td align="center">追加</td>
      <td>同じカテゴリの最新記事を各記事の下に表示する機能を追加。</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-07</td>
      <td align="center">追加</td>
      <td>関連記事機能を追加。(ELFさんには大変感謝しています）</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-07</td>
      <td align="center">変更</td>
      <td>RSSの出力に&lt;content:encoded&gt;タグを追加。</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-07</td>
      <td align="center">変更</td>
      <td>各テンプレートをロジックの変更に合わせて適宜変更。</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-07</td>
      <td align="center">変更</td>
      <td>管理画面とユーザ画面に分離していた記事投稿編集ページを統一。</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-07</td>
      <td align="center">追加</td>
      <td>権限による掲載日時のON/OFF設定を追加。</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-07</td>
      <td align="center">変更</td>
      <td>投稿フォームの本文１と本文２を一つのフォームに統一。</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-07</td>
      <td align="center">変更</td>
      <td>alsysモジュールに対応。</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-07</td>
      <td align="center">変更</td>
      <td>一部、チケットシステムをGIJOEさんのものに変更。</td>
    </tr>
    <tr>
      <td align="center">2.0</td>
      <td align="center">2006-06-07</td>
      <td align="center">バグ</td>
      <td>その他小さなバグを修正。</td>
    </tr>
    <tr>
      <td align="center">1.05</td>
      <td align="center">2006-05-26</td>
      <td align="center">バグ</td>
      <td>イベント通知の「新規ニュース記事が掲載された場合に通知する」が機能していないバグを修正。</td>
    </tr>
    <tr>
      <td align="center">1.05</td>
      <td align="center">2006-05-26</td>
      <td align="center">バグ</td>
      <td>複製したブリテンでイベント通知が正常に機能しないバグを修正。</td>
    </tr>
    <tr>
      <td align="center">1.042</td>
      <td align="center">2006-05-15</td>
      <td align="center">バグ</td>
      <td>「最新ニュース」ブロックで「hometextを表示する件数」を指定している場合に、掲載期限が切れている記事が載ってしまうバグを修正。</td>
    </tr>
    <tr>
      <td align="center">1.041</td>
      <td align="center">2006-05-14</td>
      <td align="center">バグ</td>
      <td>ブロックで「残りX文字」が正しく表示されないバグを修正。</td>
    </tr>
    <tr>
      <td align="center">1.04</td>
      <td align="center">2006-05-12</td>
      <td align="center">バグ</td>
      <td>期限切れ記事が20件以上閲覧できないバグを修正</td>
    </tr>
    <tr>
      <td align="center">1.04</td>
      <td align="center">2006-05-12</td>
      <td align="center">バグ</td>
      <td>カテゴリー別ブロックで「続きを読む」が表示されないバグを修正</td>
    </tr>
    <tr>
      <td align="center">1.04</td>
      <td align="center">2006-05-12</td>
      <td align="center">バグ</td>
      <td>RSSの表示不備を修正</td>
    </tr>
    <tr>
      <td>1.03</td>
      <td>2006-03-27</td>
      <td align="center">バグ</td>
      <td>コメント数のバグを修正</td>
    </tr>
    <tr>
      <td align="center">1.02</td>
      <td align="center">2006-02-26</td>
      <td align="center">バグ</td>
      <td>複製したBulletinのブロックが正しく機能しないバグ。</td>
    </tr>
    <tr>
      <td align="center">1.02</td>
      <td align="center">2006-02-26</td>
      <td align="center">追加</td>
      <td>newsからインポートした後のページに「戻る」リンクを追加。</td>
    </tr>
    <tr>
      <td align="center" height="17">1.02</td>
      <td align="center" height="17">2006-02-26</td>
      <td height="17" align="center">言語</td>
      <td height="17">englishを更新(thx Yuji)</td>
    </tr>
    <tr>
      <td align="center">1.02</td>
      <td align="center">2006-02-26</td>
      <td height="15" align="center">言語</td>
      <td height="15">catalanを追加(thx Yuji)</td>
    </tr>
    <tr>
      <td align="center">1.02</td>
      <td align="center">2006-02-26</td>
      <td align="center">言語</td>
      <td>portuguesebrを追加(thx Yuji)</td>
    </tr>
    <tr>
      <td align="center" height="17">1.02</td>
      <td align="center" height="17">2006-02-26</td>
      <td align="center">言語</td>
      <td>spanishを追加(thx Yuji)</td>
    </tr>
    <tr>
      <td align="center">1.02</td>
      <td align="center">2006-02-26</td>
      <td align="center">言語</td>
      <td>frenchを追加(thx gigamaster)</td>
    </tr>
    <tr>
      <td align="center" height="17">1.02</td>
      <td align="center" height="17">2006-02-26</td>
      <td align="center">言語</td>
      <td>tchineseを追加(thx kiang)</td>
    </tr>
    <tr>
      <td align="center">1.01</td>
      <td align="center">2006-02-21</td>
      <td align="center">言語</td>
      <td>englishを追加(thx Yuji)</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">バグ</td>
      <td>ブロックで件名の文字数切り詰めが出来ないバグを修正。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">追加</td>
      <td>Tell A Friendモジュールに対応。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">追加</td>
      <td>トピックを削除するとき、トピックに属する記事を他のトピックに移管できる機能を追加。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">追加</td>
      <td>「印刷する」「友達に知らせる」アイコンの表示非表示を選択できるように変更。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">追加</td>
      <td>「最新ニュース」で本文を複数表示できるように変更。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">追加</td>
      <td>RSSへのリンクを表示できるように変更。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">バグ</td>
      <td>[編集]がリンク切れしていたバグを修正。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">変更</td>
      <td>「トピック」という表記を「カテゴリ」に統一した。</td>
    </tr>
    <tr>
      <td nowrap>1.0</td>
      <td nowrap>2006-02-16</td>
      <td align="center">その他</td>
      <td nowrap>テスト版リリース</td>
    </tr>
  </tbody>
</table>
<h4>謝辞</h4>
myblocksadminをGIJOEさんからお借りしました。&lt;<a href="http://www.peak.ne.jp/">http://www.peak.ne.jp/</a>&gt;<br>
gticketをGIJOEさんからお借りしました。<br>
各言語ファイルを提供くださった皆様に感謝します。</div>
</div>
</body>
</html>