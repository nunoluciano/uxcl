!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("mode/smarty/smarty.js",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("smarty",function(t,n){function r(e,t){return c=t,e}function i(e,t,n){return t.tokenize=n,n(e,t)}function o(e,t){return null==t&&(t=e.pos),3===m&&"{"==d&&(t==e.string.length||/\s/.test(e.string.charAt(t)))}function a(e,t){for(var n=e.string,r=e.pos;;){var a=n.indexOf(d,r);if(r=a+d.length,-1==a||!o(e,a+d.length))break}if(a==e.pos)return e.match(d),e.eat("*")?i(e,t,s("comment","*"+f)):(t.depth++,t.tokenize=l,c="startTag","tag");a>-1&&(e.string=n.slice(0,a));var u=p.token(e,t.base);return a>-1&&(e.string=n),u}function l(e,t){if(e.match(f,!0))return 3===m?--t.depth<=0&&(t.tokenize=a):t.tokenize=a,r("tag",null);if(e.match(d,!0))return t.depth++,r("tag","startTag");var n=e.next();if("$"==n)return e.eatWhile(h.validIdentifier),r("variable-2","variable");if("|"==n)return r("operator","pipe");if("."==n)return r("operator","property");if(h.stringChar.test(n))return t.tokenize=u(n),r("string","string");if(h.operatorChars.test(n))return e.eatWhile(h.operatorChars),r("operator","operator");if("["==n||"]"==n)return r("bracket","bracket");if("("==n||")"==n)return r("bracket","operator");if(/\d/.test(n))return e.eatWhile(/\d/),r("number","number");if("variable"==t.last){if("@"==n)return e.eatWhile(h.validIdentifier),r("property","property");if("|"==n)return e.eatWhile(h.validIdentifier),r("qualifier","modifier")}else{if("pipe"==t.last)return e.eatWhile(h.validIdentifier),r("qualifier","modifier");if("whitespace"==t.last)return e.eatWhile(h.validIdentifier),r("attribute","modifier")}if("property"==t.last)return e.eatWhile(h.validIdentifier),r("property",null);if(/\s/.test(n))return c="whitespace",null;var i="";"/"!=n&&(i+=n);for(var o=null;o=e.eat(h.validIdentifier);)i+=o;for(var l=0,s=g.length;l<s;l++)if(g[l]==i)return r("keyword","keyword");return/\s/.test(n)?null:r("tag","tag")}function u(e){return function(t,n){for(var r=null,i=null;!t.eol();){if(i=t.peek(),t.next()==e&&"\\"!==r){n.tokenize=l;break}r=i}return"string"}}function s(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=a;break}n.next()}return e}}var c,f=n.rightDelimiter||"}",d=n.leftDelimiter||"{",m=n.version||2,p=e.getMode(t,n.baseMode||"null"),g=["debug","extends","function","include","literal"],h={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/};return{startState:function(){return{base:e.startState(p),tokenize:a,last:null,depth:0}},copyState:function(t){return{base:e.copyState(p,t.base),tokenize:t.tokenize,last:t.last,depth:t.depth}},innerMode:function(e){if(e.tokenize==a)return{mode:p,state:e.base}},token:function(e,t){var n=t.tokenize(e,t);return t.last=c,n},indent:function(t,n,r){return t.tokenize==a&&p.indent?p.indent(t.base,n,r):e.Pass},blockCommentStart:d+"*",blockCommentEnd:"*"+f}}),e.defineMIME("text/x-smarty","smarty")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("mode/xml/xml.js",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",function(r,i){function o(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r)return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(u("atom","]]>")):null:e.match("--")?n(u("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(s(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=u("meta","?>"),"meta"):(I=e.eat("/")?"closeTag":"openTag",t.tokenize=a,"tag bracket");if("&"==r){var i;return i=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),i?"atom":"error"}return e.eatWhile(/[^&<]/),null}function a(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=o,I=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return I="equals",null;if("<"==n){t.tokenize=o,t.state=p,t.tagName=t.tagStart=null;var r=t.tokenize(e,t);return r?r+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=l(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function l(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=a;break}return"string"};return t.isInAttribute=!0,t}function u(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=o;break}n.next()}return e}}function s(e){return function(t,n){for(var r;null!=(r=t.next());){if("<"==r)return n.tokenize=s(e+1),n.tokenize(t,n);if(">"==r){if(1==e){n.tokenize=o;break}return n.tokenize=s(e-1),n.tokenize(t,n)}}return"meta"}}function c(e){return e&&e.toLowerCase()}function f(e,t,n){this.prev=e.context,this.tagName=t||"",this.indent=e.indented,this.startOfLine=n,(w.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function d(e){e.context&&(e.context=e.context.prev)}function m(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!w.contextGrabbers.hasOwnProperty(c(n))||!w.contextGrabbers[c(n)].hasOwnProperty(c(t)))return;d(e)}}function p(e,t,n){return"openTag"==e?(n.tagStart=t.column(),g):"closeTag"==e?h:p}function g(e,t,n){return"word"==e?(n.tagName=t.current(),M="tag",k):w.allowMissingTagName&&"endTag"==e?(M="tag bracket",k(e,t,n)):(M="error",g)}function h(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&w.implicitlyClosed.hasOwnProperty(c(n.context.tagName))&&d(n),n.context&&n.context.tagName==r||!1===w.matchClosing?(M="tag",v):(M="tag error",b)}return w.allowMissingTagName&&"endTag"==e?(M="tag bracket",v(e,t,n)):(M="error",b)}function v(e,t,n){return"endTag"!=e?(M="error",v):(d(n),p)}function b(e,t,n){return M="error",v(e,t,n)}function k(e,t,n){if("word"==e)return M="attribute",x;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||w.autoSelfClosers.hasOwnProperty(c(r))?m(n,r):(m(n,r),n.context=new f(n,r,i==n.indented)),p}return M="error",k}function x(e,t,n){return"equals"==e?y:(w.allowMissing||(M="error"),k(e,t,n))}function y(e,t,n){return"string"==e?S:"word"==e&&w.allowUnquoted?(M="string",k):(M="error",k(e,t,n))}function S(e,t,n){return"string"==e?S:k(e,t,n)}var A=r.indentUnit,w={},z=i.htmlMode?t:n;for(var C in z)w[C]=z[C];for(var C in i)w[C]=i[C];var I,M;return o.isInText=!0,{startState:function(e){var t={tokenize:o,state:p,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;I=null;var n=t.tokenize(e,t);return(n||I)&&"comment"!=n&&(M=null,t.state=t.state(I||n,e,t),M&&(n="error"==M?n+" error":M)),n},indent:function(t,n,r){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+A;if(i&&i.noIndent)return e.Pass;if(t.tokenize!=a&&t.tokenize!=o)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==w.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+A*(w.multilineTagIndentFactor||1);if(w.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var l=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(l&&l[1])for(;i;){if(i.tagName==l[2]){i=i.prev;break}if(!w.implicitlyClosed.hasOwnProperty(c(i.tagName)))break;i=i.prev}else if(l)for(;i;){var u=w.contextGrabbers[c(i.tagName)];if(!u||!u.hasOwnProperty(c(l[2])))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+A:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:w.htmlMode?"html":"xml",helperType:w.htmlMode?"html":"xml",skipAttribute:function(e){e.state==y&&(e.state=k)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],n=e.context;n;n=n.prev)t.push(n.tagName);return t.reverse()}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("addon/mode/multiplex.js",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.multiplexingMode=function(t){function n(e,t,n,r){if("string"==typeof t){var i=e.indexOf(t,n);return r&&i>-1?i+t.length:i}var o=t.exec(n?e.slice(n):e);return o?o.index+n+(r?o[0].length:0):-1}var r=Array.prototype.slice.call(arguments,1);return{startState:function(){return{outer:e.startState(t),innerActive:null,inner:null,startingInner:!1}},copyState:function(n){return{outer:e.copyState(t,n.outer),innerActive:n.innerActive,inner:n.innerActive&&e.copyState(n.innerActive.mode,n.inner),startingInner:n.startingInner}},token:function(i,o){if(o.innerActive){var a=o.innerActive,l=i.string;if(!a.close&&i.sol())return o.innerActive=o.inner=null,this.token(i,o);var u=a.close&&!o.startingInner?n(l,a.close,i.pos,a.parseDelimiters):-1;if(u==i.pos&&!a.parseDelimiters)return i.match(a.close),o.innerActive=o.inner=null,a.delimStyle&&a.delimStyle+" "+a.delimStyle+"-close";u>-1&&(i.string=l.slice(0,u));var s=a.mode.token(i,o.inner);return u>-1?i.string=l:i.pos>i.start&&(o.startingInner=!1),u==i.pos&&a.parseDelimiters&&(o.innerActive=o.inner=null),a.innerStyle&&(s=s?s+" "+a.innerStyle:a.innerStyle),s}for(var c=1/0,l=i.string,f=0;f<r.length;++f){var d=r[f],u=n(l,d.open,i.pos);if(u==i.pos){d.parseDelimiters||i.match(d.open),o.startingInner=!!d.parseDelimiters,o.innerActive=d;var m=0;if(t.indent){var p=t.indent(o.outer,"","");p!==e.Pass&&(m=p)}return o.inner=e.startState(d.mode,m),d.delimStyle&&d.delimStyle+" "+d.delimStyle+"-open"}-1!=u&&u<c&&(c=u)}c!=1/0&&(i.string=l.slice(0,c));var g=t.token(i,o.outer);return c!=1/0&&(i.string=l),g},indent:function(n,r,i){var o=n.innerActive?n.innerActive.mode:t;return o.indent?o.indent(n.innerActive?n.inner:n.outer,r,i):e.Pass},blankLine:function(n){var i=n.innerActive?n.innerActive.mode:t;if(i.blankLine&&i.blankLine(n.innerActive?n.inner:n.outer),n.innerActive)"\n"===n.innerActive.close&&(n.innerActive=n.inner=null);else for(var o=0;o<r.length;++o){var a=r[o];"\n"===a.open&&(n.innerActive=a,n.inner=e.startState(a.mode,i.indent?i.indent(n.outer,"",""):0))}},electricChars:t.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:t}}}}}),function(e){"function"==typeof e.define&&e.define("modeSmarty",["mode/smarty/smarty.js"],function(){})}(this);