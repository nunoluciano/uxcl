** XOOPS2 - Xwords 0.46 **

----------------------
このモジュールについて
----------------------

マルチカテゴリー辞典「Wordbook」を日本語向けに特化させた改造モジュールです。
私が不要と感じた機能はバッサリと削除し、今では日本語以外では使いようがないぐらいに
なりました。「Wordbook」との互換性はありません。
XOOPS本家開発チームはこちら↓↓↓
http://dev.xoops.org/modules/xfmod/project/showfiles.php?group_id=1019

●動作を確認した環境
・XOOPS 2.0.13a
・os/Linux　Apache/1.3.34　PHP/4.4.02　MYSQL/4.00.26
・os/win　　Apache/1.3.29　PHP/4.3.04　MYSQL/3.23.38
・os/win　　Apache/2.2.00　PHP/5.1.01　MYSQL/5.00.18
・PHP文字コード　EUC-JP
・MYSQLの日本語環境　※default-character-set = ujis


------------------------
他のモジュールにない特徴
------------------------

★国語辞典風のソート

　例えばハ行の場合、は〜 → ば〜 → ぱ〜 というソートではありません。
　バーゲン、パーティー、ハイキング、ハウス、バカンス、パーキングという語を
　文字コードだけでソートすると、
　ハイキング→ハウス→バーゲン→バカンス→パーキング→パーティーとなるはずです。
　しかし、これでは「国語辞典」として使うには不満があります。
　私はここにこだわりました。そうでなければこのモジュールを使う意味がありません。
　パーキング→バーゲン→パーティー→ハイキング→ハウス→バカンスと並んでほしい方に
　ぜひ使っていただきたいと考えています。


★自動参照リンク（仮）機能の充実

　自動参照リンクとは、本文に下記の文字（※）で囲んだ語が見出し語として
　登録されていた場合、自動的にリンクを張る機能です。
　複製した Xwords 同士はもちろんのこと、プラグインにより他のモジュールにも
　リンクさせることが可能。
　元の「Wordbook」にあった機能を発展させました。
　※日本語は ｀ ´‘ ’“ ”〔 〕 ［ ］ ｛ ｝ 〈 〉 《 》「 」『 』 【 】
　　（一般設定で変更可能）
　　英単語は ' （シングルクォート） " （ダブルクォート） ` （バッククォート）


--------------------------------
インストール（アップデート）方法
--------------------------------

ダウンロードしたファイルを解凍して/modules/のフォルダにアップロード後、
管理メニューのモジュール管理からインストール（アップデート）を行ってください。
（他のモジュールと同じです）


●V0.05より古いバージョンをアップデートした場合は、下記の作業もお願いします。
　※無改造で使用していることが前提。

１．管理者としてログインしている状況で、ブラウザから admin/update.php に直接
　　アクセスしてください。リンクは張っていません。

２．イニシャル別に分類するためのデータを100語ずつアップデートします。
　　（php の実行時間に制限がある共用サーバーなどを考慮）
　　「100%UPDATE」という表示があるまで処理を続けてください。


------------------------------
複製、ディレクトリ名の変更方法
------------------------------

違うディレクトリ名にしたい場合や２つ以上インストール（アップデート）したい場合は、
下記の作業を行ってください。

１．まずは、ディレクトリ名を「xwords」から変更します。

２．次に、エディタなどで sql/mysql.sql を開き、テーブル名を変更します。
　　「CREATE TABLE `xwords_cat`」の部分と「CREATE TABLE `xwords_ent`」の部分、
　　「xwords」から変更したディレクトリ名に書きかえます。
　　例えば、ディレクトリ名が「dic」なら次のように。
　　「CREATE TABLE `xwords_cat`」→「CREATE TABLE `dic_cat`」
　　「CREATE TABLE `xwords_ent`」→「CREATE TABLE `dic_ent`」

３．あとは、templates ディレクトリ内にあるファイルの名前をすべて変更します。
　　例えば、ディレクトリ名が「dic」なら次のように。
　　xwords_category.html       → dic_category.html
　　xwords_entry.html          → dic_entry.html
　　xwords_index.html          → dic_index.html
　　xwords_letter.html         → dic_letter.html
　　xwords_preview.html        → dic_preview.html
　　xwords_request.html        → dic_request.html
　　xwords_search.html         → dic_search.html
　　xwords_submit.html         → dic_submit.html
　　blocks/entries_new.html    → blocks/dic_new.html
　　blocks/entries_random.html → blocks/dic_random.html
　　blocks/entries_top.html    → blocks/dic_top.html
　　blocks/entries_initial.html→ blocks/dic_initial.html

　　以上です。これでインストール（アップデート）してください。


●sql/mysql.sql とすべてのテンプレートファイルのパーミッションが書き込み可能
　（例えば 777）になっている場合は、ディレクトリを「xwords」から変更するだけで
　上記の作業を自動的に行います。


------------
使用上の注意
------------

●トップページの新着、人気、ランダムの段組み及び検索フォームの表示が
　使われているテーマ、ブラウザ（ホームページ閲覧ソフト）、OS によっては
　崩れる場合があります。
　XOOPS Cube に同梱されているものは問題がないことを一応確認しています。
　


●アップロードする画像ファイルの保存先は次のところです。
　パーミッションを書き込み可能な状態（777 or 766）にしてください。
　modules/xwords/images/uploads

●読み方には、全角の平仮名か片仮名を使用してください。
　半角の「,」は使ってはいけません。＜厳禁＞
　（V0.10からはローマ字（アルファベット）でも五十音別に分類できますが、
　　ソートは国語辞典風にはならず、先頭の方に表示されます）

●カテゴリーを削除するときは注意してください。
　そのカテゴリーで登録されている見出し語データもすべて削除します。
　必要に応じて先に見出し語データを変更するなどしてください。

●一般設定で「目的など」を設定しても、データが何も登録されていない状態では
　表示されません。

●タイトル用の画像ファイルは、次のフォルダ（ディレクトリ）に置いてください。
　modules/xwords/images/

●ワンタイムチケットの導入により、データの追加、修正、削除はフォームの表示後
　30分以内に送信しないとタイムオーバーになります。


--------------------------
モジュール作者様へのお願い
--------------------------

自動参照リンク（仮）機能に対応するためのプラグインファイルを貴モジュールの
include ディレクトリに xwords.plugin.php という名前で置いてください。
Xwords 側の plugins ディレクトリにあるファイルよりも優先されます。

プラグインは Xoops のグローバルサーチ search.inc.php とほぼ同じつくりになっています。
検索先がタイトルだけなのと、自分自身の記事にリンクしない SELECT 文にしてください。
皆さんなら他のプラグインを見ていただければ一目瞭然でしょう。


--------------
フィードバック
--------------

当サイトのXOOPS関連サポート用掲示板にどうぞ。
掲示板への書き込みにログインは必要ありません。つまりユーザー登録は不要です。
http://www.kanpyo.net/modules/yybbs/viewbbs.php?bbs_id=1

ただし、当方、プログラミングに関しては全くの素人です。
わからないことは素直に白旗を振りますので、あらかじめ御了承ください。


------------------
History（更新履歴）
------------------

別ファイル ChangeLog.txt をごらんください。


---------------------------------
備考（特徴以外のwoodbookとの違い）
---------------------------------

●追加した機能
・XOOPS標準のコメント機能
・ブラウザのタイトルバーに頭文字、見出し語を表示
・投稿したユーザーによる語の修正。
・検索対象に読み方を追加。
・画像ファイルのアップロード（WordPressモジュールの一部を流用）
・「拡張承認待ちブロック（ryujiさんのwaitingモジュール）」のプラグイン同梱。
・「サイトマップモジュール」のプラグイン同梱。
・「ブロック・グループ管理（GIJOEさんのmyblocksadmin.php）」の導入。
・ワンタイムチケットの導入。（gtickets.php使用）
・管理者のデータ入力にSPAW（Wysiwygエディタ）を選択できる。
　ただし、TinyDまたはWordPressでSPAWを使用しているか、同モジュールに同梱されている
　SPAWが必要。
・見出し語を元にアマゾンライブリンク用のキーワード自動生成。（要 mbstring 関数）
・複製、ディレクトリ名の変更に制限なし！
・頭文字別ブロックの追加。
・分類（カテゴリー）ごとに新着、人気を表示。
・アマゾン個別商品リンク用BBCODE [zon]商品コード[/zon] を追加。


●削除した機能
・「友達に教える」というメーラーへのリンク
・「印刷用フォーマット」での表示
・入力・修正時に表示される著者名のセレクトボタン

●データベースの変更点
・読み方のフィールド（カラム）追加
・頭文字のフィールド（カラム）型変更（1バイト→10バイト）


--------------------------------------------
頭文字（イニシャル）によるデータ抽出について
--------------------------------------------

＜language/japanese/letter_format**.php を書きかえることで変更できます＞
●配列は、$mb_init = 検索用、$mb_id = POST用、$mb_linktext = 表示用、
　$mb_separator = 区切り文字となっています。


----------------------------
アマゾンライブリンクについて
----------------------------

・一般設定で、アマゾンのＩＤを記入しないと機能しません。
・PHPの環境で mbstring 関数がないと機能しません。
・見出し語の詳細ページ（entry.php）と検索結果ページ（search.php）だけに表示します。
・アマゾンタグは、テンプレート（xwords_entry.html/xwords_search.html）に和書の分を
　書き込んでいますが、変更するときは次のとおりです。

　１．表示させたいアマゾンライブリンクタグを張る。
　２．ＩＤの部分を <{$amazon_id}> に書きかえる。
　３．検索文字列の部分を <{$searchstring}> に書きかえる。

例えば、次のとおり。
<iframe src="http://rcm-jp.amazon.co.jp/e/cm?t=<{$amazon_id}>&o=9&p=13&l=st1&mode=books-jp&search=<{$searchstring}>&=1&fc1=&&#108;&#116;1=&lc1=&bg1=&f=ifr" marginwidth="0" marginheight="0" width="468" height="60" border="0" frameborder="0" style="border:none;" scrolling="no"></iframe>

※ＩＤの部分の少し後ろにある「books-jp」が和書を示しているのはおわかりでしょう。
※<{$amazon_id}> は一般設定で書いたＩＤになります。
※<{$searchstring}> は見出し語になります。


----------------------------------------
アマゾン個別商品リンク用 BBCODE について
----------------------------------------

・一般設定で、アマゾンのＩＤを記入しないと機能しません。
本文欄に [zon]商品コード[/zon] と書くだけで画像のある拡張個別商品リンクに展開後
表示します。


----------------------------------
woodbookからデータをコピーする方法
----------------------------------

管理者としてログインしている状況で、ブラウザから admin/wb2xw.php に直接
アクセスしてください。リンクは張っていません。

データを100語ずつコピーします。
（php の実行時間に制限がある共用サーバーなどを考慮）
「data copy Wordbook -> Xwords ... Finish!」という表示があるまで
処理を続けてください。

※読み方の入力が残っていることをお忘れなく！


---
END
---
